<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>框架编写流程</title>
      <link href="/2020/04/27/%E6%A1%86%E6%9E%B6%E7%BC%96%E5%86%99%E6%B5%81%E7%A8%8B/"/>
      <url>/2020/04/27/%E6%A1%86%E6%9E%B6%E7%BC%96%E5%86%99%E6%B5%81%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p>框架编写流程</p><p>1.导包</p><p>​        </p><p>​    日志包    commons-logging-1.1.3.jar<br>​    核心包    spring-beans-4.0.0.RELEASE.jar<br>​    spring-context-4.0.0.RELEASE.jar<br>​    spring-core-4.0.0.RELEASE.jar<br>​    spring-expression-4.0.0.RELEASE.jar</p><p>2.写配置</p><p>​    创建一个springBean config file(spring的bean配置文件)</p><p>3.测试</p><p>1.在创建ioc容器之后就会创建对象 </p><p>2.同一个组件在ioc容器中是单实例的，容器启动完成就已经创建好了</p><p>3.在容器中如果没有这个组件，获取组件？会报异常。</p><pre class=" language-："><code class="language-：">配置文件中property:是用set为属性赋值的constructor-arg:利用有参构造器赋值</code></pre><p>通过P标签配置</p><pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"user6"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"cn.myq.bean.User"</span>p<span class="token operator">:</span>age<span class="token operator">=</span><span class="token string">"11"</span> p<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">"卢本伟"</span> p<span class="token operator">:</span>gender<span class="token operator">=</span><span class="token string">"男"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span></code></pre><p>一般这样配置</p><pre class=" language-java"><code class="language-java">ref<span class="token operator">:</span>是引用。<span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"user1"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"cn.myq.bean.User"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"name"</span> value<span class="token operator">=</span><span class="token string">"张飞"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span>        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"gender"</span> value<span class="token operator">=</span><span class="token string">"男"</span> <span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span>        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"age"</span> value<span class="token operator">=</span><span class="token string">"20"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span></code></pre><p><strong>级联属性：</strong></p><pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>级联属性，修改属性的属性<span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"person06"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"cn.myq.bean.Person"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"cart"</span> ref<span class="token operator">=</span><span class="token string">"cart2"</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span>    <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"cart.name"</span> value<span class="token operator">=</span><span class="token string">"666"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span>结果：Person<span class="token punctuation">{</span>name<span class="token operator">=</span><span class="token string">'null'</span><span class="token punctuation">,</span> cart<span class="token operator">=</span>Cart<span class="token punctuation">{</span>name<span class="token operator">=</span><span class="token string">'666'</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">}</span><span class="token punctuation">,</span> list<span class="token operator">=</span>null<span class="token punctuation">,</span> map<span class="token operator">=</span>null<span class="token punctuation">}</span></code></pre><p><strong>util名称空间创建集合类型的bean</strong></p><p><strong>好处：又可以方便被引用，又可以独自被创建util名称空间创建集合类型的bean</strong></p><pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"person05"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"cn.myq.bean.Person"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"map"</span> ref<span class="token operator">=</span><span class="token string">"map2"</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span><span class="token operator">&lt;</span>util<span class="token operator">:</span>map id<span class="token operator">=</span><span class="token string">"map2"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>entry key<span class="token operator">=</span><span class="token string">"12123"</span> value<span class="token operator">=</span><span class="token string">"aa"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>entry<span class="token operator">></span>    <span class="token operator">&lt;</span>entry key<span class="token operator">=</span><span class="token string">"12123"</span> value<span class="token operator">=</span><span class="token string">"aa"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>entry<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>util<span class="token operator">:</span>map<span class="token operator">></span></code></pre><p><strong>通过继承实现bean配置信息的重用</strong></p><pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>通过继承实现bean配置信息的重用 partent<span class="token operator">--</span><span class="token operator">></span>    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"cart2"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"cn.myq.bean.Cart"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"name"</span> value<span class="token operator">=</span><span class="token string">"飞机"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span>        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"size"</span> value<span class="token operator">=</span><span class="token string">"19"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span>     <span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span> <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"person07"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"cn.myq.bean.Person"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"cart"</span><span class="token operator">></span>         <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> parent继承上面bean的设置<span class="token operator">--</span><span class="token operator">></span>        <span class="token operator">&lt;</span>bean <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"cn.myq.bean.Cart"</span> parent<span class="token operator">=</span><span class="token string">"cart2"</span><span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>修改name属性的值<span class="token operator">--</span><span class="token operator">></span>            <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"name"</span> value<span class="token operator">=</span><span class="token string">"德玛西亚"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span></code></pre><p><strong>当以个bean被修饰abstract=”true“ 时代表只能被继承，不能被实例化了。</strong></p><p><strong>创建多实例的bean</strong></p><pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>    scope<span class="token operator">=</span><span class="token string">"prototype"</span> 设置可以创建多实例的bean    构造器不会在容器创建时，创建<span class="token punctuation">(</span>多实例<span class="token punctuation">)</span>    构造器会在容器创建时，创建<span class="token punctuation">(</span>单实例<span class="token punctuation">)</span><span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"user5"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"cn.myq.bean.User"</span> scope<span class="token operator">=</span><span class="token string">"prototype"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"name"</span> value<span class="token operator">=</span><span class="token string">"卢本伟"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span></code></pre><p><strong>autowire自动装配</strong>(可以按照名，类型，构造器进行装配)</p><pre><code>&lt;bean id="cart" class="cn.myq.bean.Cart"&gt;    &lt;property name="name" value="汽车"&gt;&lt;/property&gt;&lt;/bean&gt;&lt;!--autowire自动装配    byName:按名称装配 ，会查看有没有与自定义属性类型相同的，id要相同    byType:按类型装配    constructor:按构造器装配--&gt;&lt;bean id="person01" class="cn.myq.bean.Person" autowire="byType"&gt;&lt;/bean&gt;</code></pre><p><strong>SpringEL表达式</strong></p><pre><code>静态方法的调用#{T(全类名).方法名(参数)}引用其他bean、#{类id名}调用静态方法#{类id名.方法名}</code></pre><p><strong>Spring注解</strong></p><p>Spring有四个注解：</p><p>@Service：业务逻辑 service层</p><p>@Controller: 控制层  servlet层</p><p>@Repository: 持久化dao层</p><p>@@Component:给不属于以上几层的组件添加这个注解(WebUtil)</p><p>使用注解将组件快速的加入到容器中要如下几步：</p><p>1.给要添加组件上面加上注解</p><p>2.告诉Spring，自动扫面加了注解的组件，依赖context名称空间</p><p>3.一定要导入aop包</p><pre><code>配置&lt;!--context:component-scan自动扫面组件 --&gt;    &lt;!--     base-package：要扫描的组件范围 --&gt;    &lt;context:component-scan base-package="cn.myq"&gt;&lt;/context:component-scan&gt; 类 * 默认id类名首字母小写@Component@Scopek()public class BookDao {}public void test() {        //默认单实例        Object bean = aContext.getBean("bookDao");        Object bean2 = aContext.getBean("bookDao");        System.err.println(bean==bean2);    }</code></pre><p>实验16：使用context:include-filter指定扫描包时要包含的类</p><pre><code>&lt;context:component-scan base-package="cn.myq"&gt;        &lt;context:include-filter type="assignable"                                                                                        expression="cn.myq.servlet.BookServlet"/&gt;    &lt;/context:component-scan&gt;</code></pre><p>实验17：使用context:exclude-filter指定扫描包时不包含的类 </p><pre><code>&lt;!-- exclude-filter:不包含        type:annotation 按照注解去除            assignable 按照全类名去除        expression:要过滤的内容        --&gt;&lt;context:component-scan base-package="cn.myq"&gt;&lt;context:exclude-filter type="assignable" expression="cn.myq.servlet.BookServlet"/&gt;&lt;/context:component-scan&gt;</code></pre><h2 id="AOP的引入"><a href="#AOP的引入" class="headerlink" title="AOP的引入"></a>AOP的引入</h2><p>面向切面编程：基于oop基础之上的编程思想；</p><p>指在程序运行期间，将某段代码动态的切入到指定方法的指定位置进行运行的这种编程思想，面向切面编程。</p><p><strong>proxy代理人</strong></p><p>场景：计算机运行计算方法的时候进行日志记录；</p><p>加日志记录：</p><p>1.直接卸载方法内部：不推荐维护麻烦。</p><p>​    日志记录：系统的辅助功能；</p><p>​    业务逻辑：核心功能</p><p>​    耦合；</p><p>2.希望，业务逻辑（核心）；日志模块在核心功能运行期间，自己动态的加上；</p><p>运行的时候，日志功能可以加上；</p><p>可以使用动态代理来将日志代码动态的在目标方法执行前后先进行执行；</p><pre><code>public class CalculatorProxy {    public static Calculator getProxy(Calculator calculator){        ClassLoader classLoader = calculator.getClass().getClassLoader();        Class&lt;?&gt;[] interfaces = calculator.getClass().getInterfaces();        InvocationHandler handler = new InvocationHandler() {            @Override            public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {//                method是要执行那个对象的方法//                args方法的参数                System.out.println("动态代理之前");                Object invoke = method.invoke(calculator, args);                System.out.println("动态代理之后");                return invoke;            }        };        //先创建动态代理实例        Calculator calculator1 = (Calculator) Proxy.newProxyInstance(classLoader, interfaces, handler);        return calculator1;    }}</code></pre><p>总结：</p><p>​    动态代理：</p><p>​        1.写起来难；</p><p>​    2.jdk没默认的动态代理，如果目标对象没有实现任何接口是无法为他创建动态代理。</p><p>​    spring为了解决动态代理的缺点，实现了aop功能；底层就是动态代理；</p><p>​    可以利用spring一句代码都不屑的去创建动态代理；</p><p><strong>写aop的步骤如下</strong></p><p><strong>升级包</strong></p><p>com.springsource.net.sf.cglib-2.2.0.jar<br>com.springsource.org.aopalliance-1.0.0.jar<br>com.springsource.org.aspectj.weaver-1.6.8.RELEASE.jar</p><p>spring-aop-4.0.0.RELEASE.jar基础包</p><p><strong>2.写配置：</strong></p><p>1.将目标类和切面类（封装了通知方法（在目标方法执行前后执行的方法））加入到容器中</p><p>2.告诉Spring到底哪个是切面类@Aspect</p><p>3.告诉Spring，切面类里面的每一个方法，什么时候运行</p><pre class=" language-java"><code class="language-java"><span class="token operator">*</span> <span class="token keyword">try</span><span class="token punctuation">{</span><span class="token operator">*</span>     <span class="token annotation punctuation">@Before</span><span class="token operator">*</span>     method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">*</span>     <span class="token annotation punctuation">@AfterReturning</span><span class="token operator">*</span> <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">{</span><span class="token operator">*</span>     <span class="token annotation punctuation">@AfterThrowing</span><span class="token operator">*</span> <span class="token punctuation">}</span><span class="token keyword">finally</span><span class="token punctuation">{</span><span class="token operator">*</span>     <span class="token annotation punctuation">@After</span><span class="token operator">*</span> <span class="token punctuation">}</span><span class="token operator">*</span>通知注解<span class="token operator">*</span> <span class="token annotation punctuation">@Before</span><span class="token operator">:</span>在目标方法之前运行<span class="token operator">*</span> <span class="token annotation punctuation">@After</span><span class="token operator">:</span>在目标方法结束之后<span class="token operator">*</span> <span class="token annotation punctuation">@AfterReturning</span>：在目标方法正常返回之后<span class="token operator">*</span> <span class="token annotation punctuation">@AfterThrowing</span><span class="token operator">:</span>在目标方法抛出异常之后运行<span class="token operator">*</span> <span class="token annotation punctuation">@Around</span><span class="token operator">:</span>环绕</code></pre><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"execution(public int cn.myq.jisuanqi.impl.CalculatorImpl.*(int,int))"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"之前记录日志"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>关于切入点表达式：</p><p>​    <strong>execution([权限修饰符] [返回值类型] [简单类名/全类名] <a href="[参数列表]">方法名</a>)</strong></p><hr><p><img src="/2020/04/27/%E6%A1%86%E6%9E%B6%E7%BC%96%E5%86%99%E6%B5%81%E7%A8%8B/01.png" alt></p><p> 4.开启基于注解的AOP功能：</p><pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span>aop<span class="token operator">:</span>aspectj<span class="token operator">-</span>autoproxy<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>aop<span class="token operator">:</span>aspectj<span class="token operator">-</span>autoproxy<span class="token operator">></span></code></pre><p>3.测试</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ApplicationContext a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"aop.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//获取对象时，如果该对象有接口就用该接口的类，否则在用本身类</span>    Calculator bean <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>Calculator<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bean<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><strong>获取当前方法的一些参数，和信息（返回值，异常）</strong></p><pre><code>/** * joinPoint封装了当前目标方法的详细信息（CalculatorImpl.*(..))）     returning表示返回指 */@AfterReturning(value = "execution(public * cn.myq.jisuanqi.impl.CalculatorImpl.*(..))",returning = "result")public void return1(JoinPoint joinPoint,Object result){    //获取各个参数值    Object[] args = joinPoint.getArgs();    //getSignature获取签名    joinPoint.getSignature().getName();    System.out.println("结束记录日志"+ "参数列表" + Arrays.asList(args) + result);}</code></pre><p><strong>当需要获取返回值和异常信息时</strong></p><p>1.就要在直接里面添加对应的设置，返回值returning，throwing</p><p>2.在方法体中加入对应的变量</p><p><strong>抽取可重用的切入点表达式</strong></p><pre><code>/*抽取可重用的切入点表达式    1.随便声明一个没有返回值的方法    2.在上面加上@Pointcut注解（公共抽取的设置）    使用 ---&gt;&gt;  @Before("acc()")*/@Pointcut("execution(public * cn.myq.jisuanqi.impl.CalculatorImpl.*(..))")public void acc(){}</code></pre><p>基于xml配置aop</p><pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>相当于给类加上了 <span class="token annotation punctuation">@service</span> <span class="token annotation punctuation">@Controller</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>-<span class="token operator">-</span><span class="token operator">></span><span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"calculator01"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"cn.myq.calculator.impl.CalculatorImpl"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span><span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"util"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"cn.myq.util.CalculatorUtil"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>aop配置 <span class="token annotation punctuation">@Aspect</span><span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>aop<span class="token operator">:</span>config<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>指定哪个是切面类<span class="token operator">--</span><span class="token operator">></span>        <span class="token operator">&lt;</span>aop<span class="token operator">:</span>aspect id<span class="token operator">=</span><span class="token string">"aspect01"</span> ref<span class="token operator">=</span><span class="token string">"util"</span><span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>给每个方法加上对应不同的注解  <span class="token annotation punctuation">@before</span> <span class="token annotation punctuation">@After</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>-<span class="token operator">-</span><span class="token operator">></span>                <span class="token operator">&lt;</span>aop<span class="token operator">:</span>pointcut id<span class="token operator">=</span><span class="token string">"pointcut"</span> expression<span class="token operator">=</span><span class="token string">"execution(* cn.myq.calculator.impl.CalculatorImpl.*(..))"</span><span class="token operator">/</span><span class="token operator">></span>                <span class="token operator">&lt;</span>aop<span class="token operator">:</span>after method<span class="token operator">=</span><span class="token string">"after"</span> pointcut<span class="token operator">-</span>ref<span class="token operator">=</span><span class="token string">"pointcut"</span> <span class="token operator">/</span><span class="token operator">></span>                <span class="token operator">&lt;</span>aop<span class="token operator">:</span>after<span class="token operator">-</span>returning method<span class="token operator">=</span><span class="token string">"returning"</span> pointcut<span class="token operator">-</span>ref<span class="token operator">=</span><span class="token string">"pointcut"</span> returning<span class="token operator">=</span><span class="token string">"result"</span><span class="token operator">/</span><span class="token operator">></span>                <span class="token operator">&lt;</span>aop<span class="token operator">:</span>after<span class="token operator">-</span>throwing method<span class="token operator">=</span><span class="token string">"Throw1"</span> pointcut<span class="token operator">-</span>ref<span class="token operator">=</span><span class="token string">"pointcut"</span> throwing<span class="token operator">=</span><span class="token string">"exception"</span><span class="token operator">/</span><span class="token operator">></span>                <span class="token operator">&lt;</span>aop<span class="token operator">:</span>after method<span class="token operator">=</span><span class="token string">"before"</span> pointcut<span class="token operator">-</span>ref<span class="token operator">=</span><span class="token string">"pointcut"</span><span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>aop<span class="token operator">:</span>aspect<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>aop<span class="token operator">:</span>config<span class="token operator">></span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CalculatorUtil</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span>JoinPoint joinPoint<span class="token punctuation">)</span><span class="token punctuation">{</span>        Object<span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String name <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"before:执行了"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"方法,参数是"</span> <span class="token operator">+</span> Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">returning</span><span class="token punctuation">(</span>Object result<span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"returning:执行了,返回值是"</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Throw1</span><span class="token punctuation">(</span>Exception exception<span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Throwing：执行了,异常是"</span> <span class="token operator">+</span> exception<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"after:执行了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>一般情况下使用注解，当需要数据安全的时候使用xml配置</code></pre><p>pointcut：切入点</p><h2 id="声明事务"><a href="#声明事务" class="headerlink" title="声明事务"></a>声明事务</h2><p><strong>环境搭建</strong></p><p>​    1.导入sql文件</p><p>​        </p><p>​        spring-jdbc-4.0.0.RELEASE.jar<br>​        spring-orm-4.0.0.RELEASE.jar<br>​        spring-tx-4.0.0.RELEASE.jar</p><p>​    2.写类方法模拟结账</p><p><strong>test.xml:</strong></p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--引入外部配置文件--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>JDBC.properties<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!--去除配置文件中的值--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${JDBC.username}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${JDBC.password}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${JDBC.url}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>driverClassName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${JDBC.driverClassName}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--配置jdbcTemplate--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>jdbcTemplate<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.jdbc.core.JdbcTemplate<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--扫描注解--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cn.myq<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>component-scan</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></code></pre><p><strong>BookService</strong></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    BookDao bookDao<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * 哪个用户买了那本书     * @return     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">checkOut</span><span class="token punctuation">(</span>String username<span class="token punctuation">,</span>String isbn<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//减库存</span>        bookDao<span class="token punctuation">.</span><span class="token function">updateStock</span><span class="token punctuation">(</span>isbn<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//获取购买书的余额</span>        <span class="token keyword">int</span> price <span class="token operator">=</span> bookDao<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span>isbn<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//更改用户余额</span>        bookDao<span class="token punctuation">.</span><span class="token function">updateUserSalary</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p><strong>BookDao</strong></p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * 更改用户的余额 * @param username * @param price */</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateUserSalary</span><span class="token punctuation">(</span>String username<span class="token punctuation">,</span><span class="token keyword">int</span> price<span class="token punctuation">)</span><span class="token punctuation">{</span>    String sql <span class="token operator">=</span> <span class="token string">"UPDATE `account` SET `balance`=`balance`- ? WHERE username = ?"</span><span class="token punctuation">;</span>    jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>price<span class="token punctuation">,</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** * 查询书本的价格 * @param isbn * @return */</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getPrice</span><span class="token punctuation">(</span>String isbn<span class="token punctuation">)</span><span class="token punctuation">{</span>    String sql <span class="token operator">=</span> <span class="token string">"SELECT price FROM `book` WHERE `isbn` = ?"</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">queryForObject</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>Integer<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>isbn<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** * 减少库存 */</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateStock</span><span class="token punctuation">(</span>String isbn<span class="token punctuation">)</span><span class="token punctuation">{</span>    String sql <span class="token operator">=</span> <span class="token string">"UPDATE book_stock SET stock=stock-1 WHERE isbn = ?"</span><span class="token punctuation">;</span>    jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>isbn<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><strong>test</strong></p><pre class=" language-java"><code class="language-java">ApplicationContext aContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"test.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>JdbcTemplate jdbcTemplate <span class="token operator">=</span> aContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>JdbcTemplate<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    BookService bean <span class="token operator">=</span> aContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>BookService<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bean<span class="token punctuation">.</span><span class="token function">checkOut</span><span class="token punctuation">(</span><span class="token string">"jerry"</span><span class="token punctuation">,</span><span class="token string">"ISBN-001"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"购买完成"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><strong>jdbc.properties</strong></p><pre class=" language-properties"><code class="language-properties"><span class="token attr-name">JDBC.username</span><span class="token punctuation">=</span><span class="token attr-value">root</span><span class="token attr-name">JDBC.password</span><span class="token punctuation">=</span><span class="token attr-value">13758284693</span><span class="token attr-name">JDBC.url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://localhost:3306/tx</span><span class="token attr-name">JDBC.driverClassName</span><span class="token punctuation">=</span><span class="token attr-value">com.mysql.jdbc.Driver</span></code></pre><hr><p>声明式事务：</p><p>编程式事务：</p><pre><code>dataFilter（）{    try{        数据库连接        设置非自动提交        数据操作        提交    }catch{        回滚    }finally{        关闭连接    }}</code></pre><p>事务管理代码的固定模式作为一种横切关注点，可以通过AOP方法模块化，进而借助Spring AOP框架实现声明式事务管理。</p><p>由于自己写这个切面还是很麻烦：</p><p>这个切面spring已经有了，(事务切面，事务管理器)</p><p><img src="/2020/04/27/%E6%A1%86%E6%9E%B6%E7%BC%96%E5%86%99%E6%B5%81%E7%A8%8B/02.png" alt></p><p>这个事务管理器就可以在目标方法运行前后进行事务控制(事务切面)</p><p><strong>快速的为某个方法添加事务</strong></p><p>1.配置出这个事务管理器让他工作</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Druid数据库连接池使用</title>
      <link href="/2020/04/25/Druid%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/04/25/Druid%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p><strong>1.为什么要使用数据库连接池</strong></p><p><strong>为了避免重复的获取数据库连接，和是释放数据库连接而导致大量性能开销，提高响应速度。</strong></p><p><strong>在需要连接数据库时，数据库中已经有一些数据库连接在池中备用，当我们需要连接直接冲连接池中取就行，释放时归还连接，一般将最大同时连接个数设置最大，以防范用户一次连接上限，导致其他用用户等待。</strong></p><p><strong>需要的jar包</strong>：</p><p>mysql-connector-java-5.1.7-bin.jar    mysql连接驱动<br>druid-1.1.10.jar    连接池</p><p><strong>通过读取配置文件获得连接</strong></p><pre class=" language-properties"><code class="language-properties"><span class="token attr-name">username</span><span class="token punctuation">=</span><span class="token attr-value">root</span><span class="token attr-name">password</span><span class="token punctuation">=</span><span class="token attr-value">11111111</span><span class="token attr-name">url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://localhost:3306/book</span><span class="token attr-name">driverClassName</span><span class="token punctuation">=</span><span class="token attr-value">com.mysql.jdbc.Driver</span><span class="token attr-name">initialSize</span><span class="token punctuation">=</span><span class="token attr-value">5</span><span class="token attr-name">maxActive</span><span class="token punctuation">=</span><span class="token attr-value">10</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">static</span> DruidDataSource dataSource<span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token punctuation">{</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//读取配置文件</span>        Properties properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//类加载时获取配置</span>        InputStream is <span class="token operator">=</span> JdbcUtils<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"jdbc.properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//加载</span>        properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//createDataSource是读取数据源的配置信息。</span>        dataSource <span class="token operator">=</span> <span class="token punctuation">(</span>DruidDataSource<span class="token punctuation">)</span> DruidDataSourceFactory<span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//获取链接</span><span class="token keyword">public</span> <span class="token keyword">static</span> Connection <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        Connection connection <span class="token operator">=</span> thread<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            connection <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> connection<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><strong>Spring配置获取连接</strong></p><p>优点：因为spring创建bean默认时单实例</p><pre class=" language-java"><code class="language-java">        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>读取外部配置信息需要 依赖context名称空间<span class="token operator">--</span><span class="token operator">></span>        <span class="token operator">&lt;</span>context<span class="token operator">:</span>property<span class="token operator">-</span>placeholder location<span class="token operator">=</span><span class="token string">"config/JDBC.properties"</span><span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"dataSource"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.alibaba.druid.pool.DruidDataSource"</span> <span class="token operator">></span>            <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"username"</span> value<span class="token operator">=</span><span class="token string">"${jdbc.username}"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span>            <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"password"</span> value<span class="token operator">=</span><span class="token string">"${jdbc.password}"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span>            <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"url"</span> value<span class="token operator">=</span><span class="token string">"${jdbc.url}"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span>            <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"driverClassName"</span> value<span class="token operator">=</span><span class="token string">"${jdbc.driverClassName}"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span>        <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>        ApplicationContext a2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"config/ioc3.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        DataSource bean <span class="token operator">=</span> a2<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>DataSource<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Connection connection <span class="token operator">=</span> bean<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span></code></pre><pre class=" language-properties"><code class="language-properties"><span class="token attr-name">jdbc.username</span><span class="token punctuation">=</span><span class="token attr-value">root</span><span class="token attr-name">jdbc.password</span><span class="token punctuation">=</span><span class="token attr-value">13758284693</span><span class="token attr-name">jdbc.url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://localhost:3306/test</span><span class="token attr-name">jdbc.driverClassName</span><span class="token punctuation">=</span><span class="token attr-value">com.mysql.jdbc.Driver</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>mysql语法</title>
      <link href="/2020/04/24/mysql%E8%AF%AD%E6%B3%95/"/>
      <url>/2020/04/24/mysql%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h2 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h2><p><strong>打开指定的数据库</strong></p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">USE</span> <span class="token punctuation">`</span>myemployees<span class="token punctuation">`</span><span class="token punctuation">;</span></code></pre><p><strong>显示表结构</strong></p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">DESC</span> 表名<span class="token keyword">DESC</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span><span class="token punctuation">;</span></code></pre><p><strong>查询表中单个字段</strong></p><pre class=" language-sql"><code class="language-sql">语法：<span class="token keyword">select</span> 查询列表 <span class="token keyword">from</span> 表名；<span class="token keyword">SELECT</span> <span class="token punctuation">`</span>first_name<span class="token punctuation">`</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span><span class="token punctuation">;</span></code></pre><p><strong>查询表中多个字段</strong></p><pre class=" language-sql"><code class="language-sql">语法：<span class="token keyword">select</span> 查询列表<span class="token number">1</span><span class="token punctuation">,</span>查询列表<span class="token number">2</span> <span class="token keyword">from</span> 表名；<span class="token keyword">SELECT</span> <span class="token punctuation">`</span>first_name<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>last_name<span class="token punctuation">`</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span><span class="token punctuation">;</span></code></pre><p><strong>查询表中所有字段</strong></p><pre class=" language-sql"><code class="language-sql">语法：<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> 表名<span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span><span class="token punctuation">;</span></code></pre><p><strong>查询常量值</strong></p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token number">500</span><span class="token keyword">SELECT</span> <span class="token string">'卢本伟'</span></code></pre><p><strong>查询表达式</strong></p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token number">100</span><span class="token operator">*</span><span class="token number">200</span><span class="token keyword">SELECT</span> <span class="token number">200</span><span class="token operator">%</span><span class="token number">5</span></code></pre><p><strong>起别名</strong></p><pre class=" language-sql"><code class="language-sql">好处便于理解如查询的字段有重名，去以区分方式一：<span class="token keyword">SELECT</span> <span class="token punctuation">`</span>first_name<span class="token punctuation">`</span> <span class="token keyword">AS</span> 姓名 <span class="token keyword">FROM</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span><span class="token punctuation">;</span>方式二：<span class="token keyword">SELECT</span> <span class="token punctuation">`</span>first_name<span class="token punctuation">`</span> 姓名 <span class="token keyword">FROM</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span><span class="token punctuation">;</span></code></pre><p><strong>去重</strong></p><pre class=" language-sql"><code class="language-sql">示例：查询员工中涉及的所有部门种类<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span><span class="token punctuation">`</span>job_id<span class="token punctuation">`</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span><span class="token punctuation">;</span></code></pre><h2 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h2><p><strong>语法格式如下：</strong></p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> 查询列表 <span class="token keyword">from</span> 表名<span class="token keyword">where</span> 筛选条件</code></pre><p><strong>条件表达式筛选：</strong></p><pre class=" language-sql"><code class="language-sql">查询salary大于<span class="token number">20000</span>的员工信息<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span> <span class="token keyword">WHERE</span> salary <span class="token operator">></span> <span class="token number">20000</span><span class="token punctuation">;</span> 查询salary不等于<span class="token number">10000</span>的员工信息<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employeesWHERE salary <span class="token operator">&lt;></span> <span class="token number">10000</span><span class="token punctuation">;</span></code></pre><p><strong>按逻辑表达式筛选：</strong></p><p><strong>作用：用于连接条件表达式</strong></p><pre class=" language-sql"><code class="language-sql">查询id<span class="token operator">></span><span class="token number">109</span> 并且 salary <span class="token operator">></span><span class="token number">500</span>的员工信息<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span> <span class="token keyword">WHERE</span> <span class="token punctuation">`</span>employee_id<span class="token punctuation">`</span><span class="token operator">></span><span class="token number">109</span> <span class="token operator">AND</span> salary<span class="token operator">></span><span class="token number">500</span><span class="token punctuation">;</span>查询salary不在<span class="token number">5000</span>和<span class="token number">10000</span>之间的员工<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span> <span class="token keyword">WHERE</span> <span class="token operator">NOT</span><span class="token punctuation">(</span>salary<span class="token operator">></span><span class="token number">5000</span> <span class="token operator">AND</span> salary<span class="token operator">&lt;</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>模糊查询：</strong></p><p>内容：like ，between， and， in， is not null</p><p><strong>like使用</strong></p><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">#查询员工名中包含字符a的员工信息</span>通配符：<span class="token operator">%</span>表示任意字符    _任一单个字符大小写不区分<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span> <span class="token keyword">WHERE</span> <span class="token punctuation">`</span>last_name<span class="token punctuation">`</span> <span class="token operator">LIKE</span> <span class="token string">'%a%'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">#查询姓名的第二个字符为a第4个字符为b的员工信息。</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span> <span class="token keyword">WHERE</span> last_name <span class="token operator">LIKE</span> <span class="token string">'_a_b%'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">#查询姓名第二个字符为_的员工信息</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span> <span class="token keyword">WHERE</span> last_name <span class="token operator">LIKE</span> <span class="token string">'_$_%'</span> <span class="token keyword">ESCAPE</span> <span class="token string">'$'</span><span class="token punctuation">;</span></code></pre><p><strong>between and使用</strong></p><pre class=" language-sql"><code class="language-sql">特点：包含两个取值      取值不能置换<span class="token comment" spellcheck="true">#查询工资在5000到10000范围之内的员工信息</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span> <span class="token keyword">WHERE</span> salary <span class="token operator">BETWEEN</span> <span class="token number">5000</span> <span class="token operator">AND</span> <span class="token number">10000</span><span class="token punctuation">;</span></code></pre><p><strong>in使用</strong></p><pre class=" language-sql"><code class="language-sql">特点：查询X的值为Y或z<span class="token punctuation">(</span>Y和z需要时字段<span class="token punctuation">)</span>查询job_id为AD_VP<span class="token punctuation">,</span>IT_PROG的员工信息<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span> <span class="token keyword">WHERE</span> job_id <span class="token operator">IN</span><span class="token punctuation">(</span><span class="token string">'AD_VP'</span><span class="token punctuation">,</span><span class="token string">'IT_PROG'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>is null/is not null使用</strong></p><pre class=" language-sql"><code class="language-sql"> 查询奖金为<span class="token boolean">NULL</span>的员工信息 <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span> <span class="token keyword">WHERE</span> <span class="token punctuation">`</span>commission_pct<span class="token punctuation">`</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span> 查询奖金不为<span class="token boolean">NULL</span>的员工信息 <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span> <span class="token keyword">WHERE</span> <span class="token punctuation">`</span>commission_pct<span class="token punctuation">`</span> <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring初体验</title>
      <link href="/2020/04/24/spring%E5%88%9D%E4%BD%93%E9%AA%8C/"/>
      <url>/2020/04/24/spring%E5%88%9D%E4%BD%93%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>设计模式七大原则</title>
      <link href="/2020/04/23/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B8%83%E5%A4%A7%E5%8E%9F%E5%88%99/"/>
      <url>/2020/04/23/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B8%83%E5%A4%A7%E5%8E%9F%E5%88%99/</url>
      
        <content type="html"><![CDATA[<h2 id="单一职责原则："><a href="#单一职责原则：" class="headerlink" title="单一职责原则："></a>单一职责原则：</h2><p><strong>问题的由来：</strong></p><p>T负责两个不同的职责：职责P1，职责P2。当由于职责P1需求发生改变而需要修改类T时，有可能会导致原本运行正常的职责P2功能发生故障。也就是说职责P1和P2被<a href="https://baike.baidu.com/item/耦合/2821124" target="_blank" rel="noopener">耦合</a>在了一起。</p><p><strong>解决办法：</strong></p><p>遵守单一职责原则，将不同的职责封装到不同的类或模块中。</p><p>测试一：</p><pre><code>public class OnlyTest {    public static void main(String[] args) {        Che che = new Che();        che.run("车");        che.run("飞机");        che.run("火箭");    }}//并不能完成我们理想的状态//违反了单一职责，解决更具每个交通的运行方式不同，分解出不同的类class Che{    public void run(String cart){        System.out.println(cart + "在路上跑");    }}</code></pre><p>测试二：(推荐)</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OnlyTest2</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Che1 che <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Che1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        FeiJi feiJi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FeiJi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        HuoJian huoJian <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HuoJian</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        che<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"汽车"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        feiJi<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"隐形飞机"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        huoJian<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"火箭"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//完全实现了单一职责原则，实现了分离(适合每个类有较多方法)</span><span class="token comment" spellcheck="true">//但是由于单个类的方法较少，可以在一个类中用各自对应的方法实现。</span><span class="token keyword">class</span> <span class="token class-name">Che1</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span>String a<span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a <span class="token operator">+</span> <span class="token string">"在路上跑"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">FeiJi</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span>String a<span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a <span class="token operator">+</span> <span class="token string">"在天上飞"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">HuoJian</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span>String a<span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a <span class="token operator">+</span> <span class="token string">"在大气飞"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>总结：</strong></p><p>​    <strong>1.降低了类的复杂度，一个类维护一个职责</strong></p><p>​    <strong>2.提高可毒性，可维护性</strong></p><p>​    <strong>3.降低变更引起的风险</strong></p><h2 id="接口隔离原则："><a href="#接口隔离原则：" class="headerlink" title="接口隔离原则："></a>接口隔离原则：</h2><p><strong>简介：</strong></p><ul><li><p>使用多个专门的接口比使用单一的总接口要好。</p></li><li><p>一个类对另外一个类的依赖性应当是建立在最小的接口上的。</p></li><li><p>一个接口代表一个角色，不应当将不同的角色都交给一个接口。没有关系的接口合并在一起，形成一个臃肿的大接口，这是对角色和接口的污染。</p></li><li><p>“不应该强迫客户依赖于它们不用的方法。接口属于客户，不属于它所在的<a href="https://baike.baidu.com/item/类层次结构/4685758" target="_blank" rel="noopener">类层次结构</a>。”这个说得很明白了，再通俗点说，不要强迫客户使用它们不用的方法，如果强迫用户使用它们不使用的方法，那么这些客户就会面临由于这些不使用的方法的改变所带来的改变。</p></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 设计模式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>多线程创建使用</title>
      <link href="/2020/04/22/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%88%9B%E5%BB%BA%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/04/22/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%88%9B%E5%BB%BA%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="1-线程与进程"><a href="#1-线程与进程" class="headerlink" title="1.线程与进程"></a>1.线程与进程</h2><p>程序：是指一段静态(没有加载，在硬盘的代码)的代码，静态的对象。</p><p><strong>线程</strong>：每个线程有自己独立的堆和程序计数器。当一个程序进入内存运行时，内部可能包含了多个顺序执行流，每个顺序执行流就是一个线程。有一定独立的功能，是分配和调度的一个独立单位，<strong>···一个进程的多个线程共享相同的内存单元/内存地址空间，可以同时访问堆，变量，多以多个线程共享资源会造成安全隐患。</strong></p><p><strong>进程</strong>：每一个运行中的程序就是一个进程。</p><p><strong>并行</strong>：同一时刻多条指令在多个处理器上同时执行。</p><p><strong>并发</strong>：一个进程同时执行多个线程。</p><p>在一个java程序中至少有三个线程：main主线程，gc垃圾回收线程，异常处理线程，出异常会影响，主线程。</p><p>多线程的优点：</p><p>​    进程之间不能共享内存，线程之间可以共享内存</p><p>​    多线程来实现多任务并发比多线程的效率高（提高cpu利用率）</p><p>​    独立运行，易于理解和修改</p><p><strong>归纳来说：操作系统可以执行多个任务，每个人物都是一个进程，进程可以同时执行多个任务，每个任务就是一个线程</strong></p><h2 id="2-线程的创建和启动"><a href="#2-线程的创建和启动" class="headerlink" title="2.线程的创建和启动"></a>2.线程的创建和启动</h2><h3 id="方式一：继承Thread类创建线程类"><a href="#方式一：继承Thread类创建线程类" class="headerlink" title="方式一：继承Thread类创建线程类"></a>方式一：继承Thread类创建线程类</h3><p>1.第一Thread类的子类，重写该类的run()方法，该run方法的方法体就代表了线程需要完成的任务。</p><p>2.创建Thread子类的实例，创建线程对象。</p><p>3.调用线程对象的start()方法来调用该线程。</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//1.创建一个类继承Thread</span><span class="token keyword">class</span> <span class="token class-name">OneCreateThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//2.重写run方法</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span><span class="token number">10000</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateThread</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//3.调用创建的线程对象并start</span>        Thread t1 <span class="token operator">=</span>  <span class="token keyword">new</span>  <span class="token class-name">OneCreateThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//t1.start();当需要再调一次该线程时。当需要多个线程时要造多个对象</span>        Thread t2 <span class="token operator">=</span>  <span class="token keyword">new</span>  <span class="token class-name">OneCreateThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//正确</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span><span class="token number">10000</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token string">"run"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="Thread中的常用方法："><a href="#Thread中的常用方法：" class="headerlink" title="Thread中的常用方法："></a>Thread中的常用方法：</h3><pre><code>1. **start(): 启动当前线程：调用当前该线程的run()；** 2. **run(): 通常需要重写Thread类中的此方法，将创建的线程要执行的操作声明在此方法中** 3. currentThread();静态方法，返回执行当前代码的线程。 4. getName();获取当前线程的名字 5. setName();设置当前线程的名字 6. **yield():释放当前cpu的执行权(cpu重新调度,可能还会将执行权分配给自己)** 7. **join():在线程a中调用线程b的join()，此时线程a就进入阻塞状态，知道线程b完全执行结束，线程a才结束阻塞状态(插队)。** 8. stop():当执行此方法时，强制结束当前线程。 9. **sleep(long milltime);让当前线程“睡眠”指定milltime毫秒，在指定的毫秒内当前线程时阻塞状态** 10. isAlive():判断当前线程是否存活。 11. **setPriority()：设置优先级**</code></pre><h2 id="线程的优先级："><a href="#线程的优先级：" class="headerlink" title="线程的优先级："></a>线程的优先级：</h2><pre><code>class OneCreateThread extends Thread{    @Override    public void run() {        for (int i = 0; i &lt;100000 ; i++) {            if(i % 2 == 0){                System.out.println(Thread.currentThread().getName() +" "+ i);            }        }    }}public class CreateThread {    public static void main(String[] args) {        Thread t1 =  new  OneCreateThread();        //设置优先级        t1.setPriority(Thread.MAX_PRIORITY);        t1.start();        Thread.currentThread().setPriority(1);        for (int i = 0; i &lt;100000; i++) {            if(i % 2 != 0){                System.out.println(i+" " + "run");            }        }    }}</code></pre><p><strong>改线程名要在start前执行</strong></p><p><img src="/2020/04/22/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%88%9B%E5%BB%BA%E4%BD%BF%E7%94%A8/01.png" alt=""></p><p><strong>总结：</strong>当设置了优先级是CPU调度时调度到该线程的概率变大，并不是先该线程你执行。</p><h3 id="方式二：用Runnable接口实现创建线程"><a href="#方式二：用Runnable接口实现创建线程" class="headerlink" title="方式二：用Runnable接口实现创建线程"></a>方式二：用Runnable接口实现创建线程</h3><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//1.创建一个类实现runnable(匿名类也行)</span><span class="token keyword">class</span> <span class="token class-name">SubThread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token comment" spellcheck="true">//2.实现run方法</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token string">" "</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateRunnable</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//3.创建实现类的对象</span>        SubThread subThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//4.将参数放进Thread</span>        Thread thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>subThread<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//5.通过start启动线程</span>        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token string">" "</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="疑问？调用Thread的start为什么会执行SubThread的run方法呢"><a href="#疑问？调用Thread的start为什么会执行SubThread的run方法呢" class="headerlink" title="疑问？调用Thread的start为什么会执行SubThread的run方法呢?"></a>疑问？调用Thread的start为什么会执行SubThread的run方法呢?</h3><p>以下时Thread 通过start调用的的run方法。</p><pre><code>private Runnable target;public void run() {    if (target != null) {        target.run();    }}</code></pre><p>通过分析源码不难发现当传入的值是runnable类型是，通过start调用的run方法，其实是调用的是runnable的run()方法</p><h3 id="Runnable和Thread的区别："><a href="#Runnable和Thread的区别：" class="headerlink" title="Runnable和Thread的区别："></a>Runnable和Thread的区别：</h3><p><a href="https://blog.csdn.net/zhaojianting/article/details/97664370" target="_blank" rel="noopener">https://blog.csdn.net/zhaojianting/article/details/97664370</a></p><h3 id="为什么会出现线程安全问题？"><a href="#为什么会出现线程安全问题？" class="headerlink" title="为什么会出现线程安全问题？"></a>为什么会出现线程安全问题？</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Test01</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>count<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">//此处的睡眠是为了增大出错的概率</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> <span class="token string">"票号为："</span> <span class="token operator">+</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>                count<span class="token operator">--</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoTest</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Test01 test01 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>test01<span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>test01<span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread t3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>test01<span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"售票处1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"售票处2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t3<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"售票处3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t3<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p>结果：<img src="/2020/04/22/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%88%9B%E5%BB%BA%E4%BD%BF%E7%94%A8/02.png" style="zoom:80%;"></p><p>当多个线程同时访问一个数据源时。</p><pre><code>当count等于100        t1线程抢到cpu分配的权        进入睡眠        释放cpu权count还是1         t3抢到cpu分配权                进入睡眠        释放cpu权count还是1         t2抢到cpu分配权                进入睡眠        释放cpu权t1睡眠时间到           count-1                                    count  = 0                        t3睡眠时间到           count-1                                    count  = -1t2睡眠时间到           count-1                                    count  = -2</code></pre><hr><p><strong>结论：当某个线程操作过程中，尚未操作完成时，其他线程参与进来，也操作车票。</strong></p><p><strong>当多个线程同时读写同一份共享资源的时候,可能会引起冲突</strong></p><p><strong>此时就应该加上同步锁解决问题</strong></p><hr><h2 id="解决线程同步安全"><a href="#解决线程同步安全" class="headerlink" title="解决线程同步安全"></a>解决线程同步安全</h2><h3 id="方式一：同步代码块"><a href="#方式一：同步代码块" class="headerlink" title="方式一：同步代码块"></a>方式一：同步代码块</h3><p><strong>实现Runnable：</strong></p><pre><code>synchronized(同步锁){    //需要被同步的代码}说明：1.操作共享数据的代码，就是需要被同步的代码     2.共享数据：多个线程共同操作的变量。比如：count就是共享数据。     3.同步监视器，锁，任何一个类的对象，都可以充当锁。要求多个线程必须要共用同一把锁。</code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Test01</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//新添加</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token keyword">try</span> <span class="token punctuation">{</span>                        Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> <span class="token string">"票号为："</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>                    count<span class="token operator">--</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoTest</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Test01 test01 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>test01<span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>test01<span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread t3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>test01<span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"售票处1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"售票处2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t3<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"售票处3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t3<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>继承Thread：</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">test02</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//使多个线程公用一个count</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//因为同步监视器需要唯一的对象，所以使用当前类加载</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>ThreadTest02<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token keyword">try</span> <span class="token punctuation">{</span>                        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>                    count<span class="token operator">--</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadTest02</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        test02 test02 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        test02 test03 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        test02<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        test03<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><img src="/2020/04/22/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%88%9B%E5%BB%BA%E4%BD%BF%E7%94%A8/03.png" style="zoom: 67%;"><p><strong>结论：</strong></p><ul><li><p><strong>在实现Runnable接口创建多线程中，锁可以用this。</strong></p></li><li><p><strong>在继承Thread类创建多线程中，慎用this，可以用类加载(类也是对象Class的对象)</strong></p></li><li><p><strong>当有一个线程拿到锁就可以执行同步的内容，其他的只能等待。</strong></p></li><li><p><strong>解决了线程的安全问题</strong></p></li><li><p><strong>但是在同步代码块内，变成了单线程的过程，效率变低了。</strong></p></li></ul><h3 id="方式二：同步方法锁"><a href="#方式二：同步方法锁" class="headerlink" title="方式二：同步方法锁"></a>方式二：同步方法锁</h3><p><strong>Runnable：</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Test02</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//新添加</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//新添加</span>            <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//为了示例将改内容抽为方法,只要将其方法用synchronized即可</span>    <span class="token comment" spellcheck="true">//因为show是this调用的。</span>    <span class="token keyword">private</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> <span class="token string">"票号为："</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>            count<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>Thread：</strong></p><pre><code>    //使多个线程公用一个count    private static int count = 100;    @Override    public void run() {        while (true){            //因为同步监视器需要唯一的对象，所以使用当前类加载               show();        }    }    //当多个线程调用，当前前类是否唯一    private static synchronized void show() {        if (count &gt; 0) {            try {                sleep(100);            } catch (InterruptedException e) {                e.printStackTrace();            }            System.out.println(Thread.currentThread().getName() + " " + count);            count--;        }     }}</code></pre><p>非静态同步方法：同步监视器是：this。</p><p>静态同步方法：同步监视器是：当前类本身。</p><h3 id="方式三：Lock锁"><a href="#方式三：Lock锁" class="headerlink" title="方式三：Lock锁"></a>方式三：Lock锁</h3><p>lock是一个接口(使用ReentrantLock)</p><pre><code>class lock1 implements Runnable{    private int count = 100;    //第一步实例化ReentrantLock对象    Lock lock = new ReentrantLock();    @Override    public void run() {        while(true){            try {                //2.调用lock()获取锁                lock.lock();                if (count &gt; 0) {                    System.out.println(Thread.currentThread().getName() + " " + count);                    count--;                } else {                    break;                }            }finally {                //3.调用lock释放锁                lock.unlock();            }        }    }}public class lockTest {    public static void main(String[] args) {        lock1 lock1 = new lock1();        Thread thread = new Thread(lock1);        Thread thread1 = new Thread(lock1);        thread.start();        thread1.start();    }}</code></pre><p><strong>synchronized与lock的区别</strong></p><p><strong>相同：</strong>都可以解决线程同步问题</p><p><strong>不同：</strong>synchronized在执行完同步代码块之后，自动释放同步监视器(锁),lock需要手动的开启同步，手动关闭。</p><h2 id="线程通信"><a href="#线程通信" class="headerlink" title="线程通信"></a>线程通信</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">mes</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> Object object <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//因为释放线程锁其他线程会进入</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>object<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//调用notify会唤醒阻塞的线程，就形成了一个通信</span>                object<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">": "</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>                    count<span class="token operator">--</span><span class="token punctuation">;</span>                    <span class="token keyword">try</span> <span class="token punctuation">{</span>                        <span class="token comment" spellcheck="true">//当调用wait方法时，会释放线程锁</span>                        object<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//阻塞</span>                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>说明：</strong></p><ul><li><p>wait(),notify(),notifyAll()三个方法必须使用在同步代码块中</p></li><li><p>wait(),notify(),notifyAll()三个方法调用者必须是同步代码块或者同步方法中的同步监视器。</p></li></ul><h3 id="sleep-和wait的区别？-重点"><a href="#sleep-和wait的区别？-重点" class="headerlink" title="sleep()和wait的区别？(重点)"></a><strong>sleep()和wait的区别？(重点)</strong></h3><p><strong>相同点：</strong>一旦调用就会进入阻塞状态。</p><p><strong>不同点：</strong> 1.sleep和wait的声明位置不同，Thread类中声明sleep(),Object中声明wait();</p><p>​                2.调用要求，wait()调用者必须是同步代码块或者同步方法中的同步监视器,sleep任何情况都可以调用。</p><p>​                3.sleep不会释放锁，wait会释放锁。</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * 生产者(Productor)将产品交给店员(Clerk)，而消费者(Customer)从店员处 * 取走产品，店员一次只能持有固定数量的产品(比如:20），如果生产者试图 * 生产更多的产品，店员会叫生产者停一下，如果店中有空位放产品了再通 * 知生产者继续生产；如果店中没有产品了，店员会告诉消费者等一下，如 * 果店中有产品了再通知消费者来取走产品。 * @author myq * @create 2020-04-22 21:01 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">a</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Clerk clerk <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Clerk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Producer p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Producer</span><span class="token punctuation">(</span>clerk<span class="token punctuation">)</span><span class="token punctuation">;</span>        p1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"生产者1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Consumer consumer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Consumer</span><span class="token punctuation">(</span>clerk<span class="token punctuation">)</span><span class="token punctuation">;</span>        consumer<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"消费者1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        p1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        consumer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** * 生产者 */</span><span class="token keyword">class</span> <span class="token class-name">Producer</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> Clerk clerk<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Producer</span><span class="token punctuation">(</span>Clerk clerk<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>clerk <span class="token operator">=</span> clerk<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">":开始生产"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                clerk<span class="token punctuation">.</span><span class="token function">shengcan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** * 消费者 */</span><span class="token keyword">class</span> <span class="token class-name">Consumer</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> Clerk clerk<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Consumer</span><span class="token punctuation">(</span>Clerk clerk<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>clerk <span class="token operator">=</span> clerk<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">":开始消费"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                clerk<span class="token punctuation">.</span><span class="token function">xiaofei</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** * 店员 */</span><span class="token keyword">class</span> <span class="token class-name">Clerk</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">shengcan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            count<span class="token operator">++</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">":开始生产第"</span> <span class="token operator">+</span> count <span class="token operator">+</span> <span class="token string">"个食品"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//当生产者，有商品时就可以唤醒消费者</span>            <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">xiaofei</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">":开始消费第"</span> <span class="token operator">+</span> count <span class="token operator">+</span> <span class="token string">"个食品"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            count<span class="token operator">--</span> <span class="token punctuation">;</span>            <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="方式三：实现Callable创建线程"><a href="#方式三：实现Callable创建线程" class="headerlink" title="方式三：实现Callable创建线程"></a>方式三：实现Callable创建线程</h2><pre><code>class myCall implements Callable&lt;Integer&gt; {    private int count = 0;    @Override    public Integer call() throws Exception {        while (true){            if(count&lt;=100){                System.out.println(count);                count++;            }else {                break;            }        }        return count;    }}public class Call {    public static void main(String[] args) {        myCall myCall = new myCall();        FutureTask&lt;Integer&gt; future = new FutureTask&lt;Integer&gt;(myCall);        new Thread(future).start();        try {            //获取返回值            Integer integer = future.get();            System.out.println("和为："+ integer.intValue());        } catch (InterruptedException e) {            e.printStackTrace();        } catch (ExecutionException e) {            e.printStackTrace();        }    }}</code></pre><p><a href="https://blog.csdn.net/weixin_42606135/article/details/81282736" target="_blank" rel="noopener">https://blog.csdn.net/weixin_42606135/article/details/81282736</a></p><p>Callable的优点：</p><p>call()可以有返回值，可以抛出异常，call支持异常。</p><h2 id="方式四：关于线程池，创建线程"><a href="#方式四：关于线程池，创建线程" class="headerlink" title="方式四：关于线程池，创建线程"></a>方式四：关于线程池，创建线程</h2><p><a href="https://www.jianshu.com/p/7726c70cdc40" target="_blank" rel="noopener">https://www.jianshu.com/p/7726c70cdc40</a></p><h2 id="参考文献："><a href="#参考文献：" class="headerlink" title="参考文献："></a>参考文献：</h2><p><a href="https://blog.csdn.net/weixin_42606135/article/details/81282736" target="_blank" rel="noopener">https://blog.csdn.net/weixin_42606135/article/details/81282736</a></p><p><a href="https://blog.csdn.net/zhaojianting/article/details/97664370" target="_blank" rel="noopener">https://blog.csdn.net/zhaojianting/article/details/97664370</a></p><p><a href="https://www.bilibili.com/video/BV1zE41197bw?t=7&amp;p=37" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1zE41197bw?t=7&amp;p=37</a></p><p><a href="https://www.jianshu.com/p/7726c70cdc40" target="_blank" rel="noopener">https://www.jianshu.com/p/7726c70cdc40</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> JAVA进阶 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVASE </tag>
            
            <tag> Thread </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IDEA操作</title>
      <link href="/2020/04/21/IDEA%E6%93%8D%E4%BD%9C/"/>
      <url>/2020/04/21/IDEA%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h2 id="IDEA基本配置操作："><a href="#IDEA基本配置操作：" class="headerlink" title="IDEA基本配置操作："></a>IDEA基本配置操作：</h2><hr><h3 id="1-设置IDEA鼠标悬停-提示注释"><a href="#1-设置IDEA鼠标悬停-提示注释" class="headerlink" title="1.设置IDEA鼠标悬停(提示注释)"></a>1.设置IDEA鼠标悬停(提示注释)</h3><p><img src="/2020/04/21/IDEA%E6%93%8D%E4%BD%9C/01.png" alt=""></p><h3 id="2-设置自动导包"><a href="#2-设置自动导包" class="headerlink" title="2.设置自动导包"></a>2.设置自动导包</h3><p><img src="/2020/04/21/IDEA%E6%93%8D%E4%BD%9C/02.png" alt=""></p><h3 id="3-设置方法之间的分隔符"><a href="#3-设置方法之间的分隔符" class="headerlink" title="3.设置方法之间的分隔符"></a>3.设置方法之间的分隔符</h3><p><img src="/2020/04/21/IDEA%E6%93%8D%E4%BD%9C/03.png" alt=""></p><h3 id="4-当数据源多时-多把数据源输出-多行效率高"><a href="#4-当数据源多时-多把数据源输出-多行效率高" class="headerlink" title="4.当数据源多时(多把数据源输出,多行效率高)"></a>4.当数据源多时(多把数据源输出,多行效率高)</h3><p><img src="/2020/04/21/IDEA%E6%93%8D%E4%BD%9C/04.png" alt=""></p><h3 id="5-修改类头的文档注释信息"><a href="#5-修改类头的文档注释信息" class="headerlink" title="5.修改类头的文档注释信息"></a><strong>5.修改类头的文档注释信息</strong></h3><p><img src="/2020/04/21/IDEA%E6%93%8D%E4%BD%9C/05.png" alt=""></p><pre class=" language-java"><code class="language-java">$<span class="token punctuation">{</span>PACKAGE_NAME<span class="token punctuation">}</span> <span class="token operator">-</span> the name of the target <span class="token keyword">package</span> where the <span class="token keyword">new</span> <span class="token class-name">class</span> or <span class="token keyword">interface</span> <span class="token class-name">will</span> be created<span class="token punctuation">.</span> $<span class="token punctuation">{</span>PROJECT_NAME<span class="token punctuation">}</span> <span class="token operator">-</span> the name of the current project<span class="token punctuation">.</span> $<span class="token punctuation">{</span>FILE_NAME<span class="token punctuation">}</span> <span class="token operator">-</span> the name of the PHP file that will be created<span class="token punctuation">.</span> $<span class="token punctuation">{</span>NAME<span class="token punctuation">}</span> <span class="token operator">-</span> the name of the <span class="token keyword">new</span> <span class="token class-name">file</span> which you specify in the New <span class="token class-name">File</span> dialog box during the file creation<span class="token punctuation">.</span> $<span class="token punctuation">{</span>USER<span class="token punctuation">}</span> <span class="token operator">-</span> the login name of the current user<span class="token punctuation">.</span> $<span class="token punctuation">{</span>DATE<span class="token punctuation">}</span> <span class="token operator">-</span> the current system date<span class="token punctuation">.</span> $<span class="token punctuation">{</span>TIME<span class="token punctuation">}</span> <span class="token operator">-</span> the current system time<span class="token punctuation">.</span> $<span class="token punctuation">{</span>YEAR<span class="token punctuation">}</span> <span class="token operator">-</span> the current year<span class="token punctuation">.</span> $<span class="token punctuation">{</span>MONTH<span class="token punctuation">}</span> <span class="token operator">-</span> the current month<span class="token punctuation">.</span> $<span class="token punctuation">{</span>DAY<span class="token punctuation">}</span> <span class="token operator">-</span> the current day of the month<span class="token punctuation">.</span> $<span class="token punctuation">{</span>HOUR<span class="token punctuation">}</span> <span class="token operator">-</span> the current hour<span class="token punctuation">.</span> $<span class="token punctuation">{</span>MINUTE<span class="token punctuation">}</span> <span class="token operator">-</span> the current minute<span class="token punctuation">.</span> $<span class="token punctuation">{</span>PRODUCT_NAME<span class="token punctuation">}</span> <span class="token operator">-</span> the name of the IDE in which the file will be created<span class="token punctuation">.</span> $<span class="token punctuation">{</span>MONTH_NAME_SHORT<span class="token punctuation">}</span> <span class="token operator">-</span> the first <span class="token number">3</span> letters of the month name<span class="token punctuation">.</span> Example<span class="token operator">:</span> Jan<span class="token punctuation">,</span> Feb<span class="token punctuation">,</span> etc<span class="token punctuation">.</span> $<span class="token punctuation">{</span>MONTH_NAME_FULL<span class="token punctuation">}</span> <span class="token operator">-</span> full name of a month<span class="token punctuation">.</span> Example<span class="token operator">:</span> January<span class="token punctuation">,</span> February<span class="token punctuation">,</span> etc<span class="token punctuation">.</span></code></pre><h3 id="6-更改字符集-必须"><a href="#6-更改字符集-必须" class="headerlink" title="6.更改字符集(必须)"></a>6.更改字符集(必须)</h3><p><img src="/2020/04/21/IDEA%E6%93%8D%E4%BD%9C/06.png" alt=""></p><h3 id="7-设置自动编译"><a href="#7-设置自动编译" class="headerlink" title="7.设置自动编译"></a>7.设置自动编译</h3><p><img src="/2020/04/21/IDEA%E6%93%8D%E4%BD%9C/07.png" alt=""></p><h3 id="8-模板-代码更加便捷"><a href="#8-模板-代码更加便捷" class="headerlink" title="8.模板(代码更加便捷)"></a>8.模板(代码更加便捷)</h3><p><img src="/2020/04/21/IDEA%E6%93%8D%E4%BD%9C/09.png" alt=""></p><hr><h2 id="IDEA快捷键："><a href="#IDEA快捷键：" class="headerlink" title="IDEA快捷键："></a>IDEA快捷键：</h2><h3 id="1-设置快捷键与XXX一样"><a href="#1-设置快捷键与XXX一样" class="headerlink" title="1.设置快捷键与XXX一样"></a>1.设置快捷键与XXX一样<img src="/2020/04/21/IDEA%E6%93%8D%E4%BD%9C/08.png" alt=""></h3><h3 id="2-基本快捷键"><a href="#2-基本快捷键" class="headerlink" title="2.基本快捷键"></a>2.基本快捷键</h3><table><thead><tr><th><strong>快捷键</strong></th><th><strong>介绍</strong></th></tr></thead><tbody><tr><td>Ctrl + F</td><td>在当前文件进行文本查找 <code>（必备）</code></td></tr><tr><td>Ctrl + R</td><td>在当前文件进行文本替换 <code>（必备）</code></td></tr><tr><td>Ctrl + Y</td><td>删除光标所在行 或 删除选中的行 <code>（必备）</code></td></tr><tr><td>Ctrl + D</td><td>复制光标所在行 或 复制选择内容，并把复制内容插入光标位置下面 <code>（必备）</code></td></tr><tr><td>Ctrl + N</td><td>根据输入的 <strong>类名</strong> 查找类文件</td></tr><tr><td>Ctrl + W</td><td>选中光标所在的单词或段落，连续按会在原有选中的基础上再扩展选中范围</td></tr><tr><td>Ctrl + /</td><td>注释光标所在行代码，会根据当前不同文件类型使用不同的注释符号 <code>（必备）</code></td></tr><tr><td>Ctrl + Shift + F</td><td>根据输入内容查找整个项目 或 指定目录内文件 <code>（必备）</code></td></tr><tr><td>Ctrl + Shift + R</td><td>根据输入内容替换对应内容，范围为整个项目 或 指定目录内文件 <code>（必备）</code></td></tr><tr><td>Ctrl + Shift + J</td><td>自动将下一行合并到当前行末尾 <code>（必备）</code></td></tr><tr><td>Ctrl + Shift + Z</td><td>取消撤销 <code>（必备）</code></td></tr><tr><td>Ctrl + Shift + T</td><td>对当前类生成单元测试类，如果已经存在的单元测试类则可以进行选择</td></tr><tr><td>F2</td><td>跳转到下一个高亮错误 或 警告位置 <code>（必备）</code></td></tr><tr><td>ctrl + x</td><td>删除当前列</td></tr><tr><td>ctrl + p</td><td>NEW实例时查看构造器的参数</td></tr><tr><td>ctrl + q</td><td>查看方法的详细信息</td></tr><tr><td>shfit + t</td><td>更改文件名</td></tr><tr><td>Ctrl＋Alt＋T</td><td>可以将代码包在一块内，例如try/catch</td></tr><tr><td>Ctrl + Alt + L</td><td>格式化代码</td></tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 软件设置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> IDEA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Filter</title>
      <link href="/2020/04/21/Filter/"/>
      <url>/2020/04/21/Filter/</url>
      
        <content type="html"><![CDATA[<h2 id="1-filter有什么作用？"><a href="#1-filter有什么作用？" class="headerlink" title="1.filter有什么作用？"></a>1.filter有什么作用？</h2><ul><li><p>Filter也称之为过滤器，它是Servlet技术中最实用的技术，Web开发人员通过Filter技术，对web服务器管理的所有web资源。</p></li><li><p>例如实现URL级别的权限访问控制、过滤敏感词汇、压缩响应信息等一些高级功能。例如对Jsp, Servlet, 静态图片文件或静态 html 文件等进行拦截，从而实现一些特殊的功能。</p></li><li><p>它主要用于对用户请求进行预处理，也可以对HttpServletResponse进行后处理。使用Filter的完整流程：Filter对用户请求进行预处理，接着将请求交给Servlet进行处理并生成响应，最后Filter再对服务器响应进行后处理。</p></li></ul><p><img src="/2020/04/21/Filter/01.png" alt></p><h2 id="2-Filter的生命周期"><a href="#2-Filter的生命周期" class="headerlink" title="2.Filter的生命周期"></a>2.Filter的生命周期</h2><ul><li><p>和我们编写的Servlet程序一样，Filter的创建和销毁由WEB服务器负责。 web 应用程序启动时，web 服务器将创建Filter 的实例对象，并调用其init方法，读取web.xml配置，完成对象的初始化功能，从而为后续的用户请求作好拦截的准备工作</p></li><li><p>filter对象只会创建一次，init方法也只会执行一次。开发人员通过init方法的参数，可获得代表当前filter配置信息的FilterConfig对象。</p></li><li><p>这个方法完成实际的过滤操作。当客户请求访问与过滤器关联的URL的时候，Servlet过滤器将先执行doFilter方法。FilterChain参数用于访问后续过滤器。</p></li><li><p>Filter对象创建后会驻留在内存e799bee5baa6e79fa5e98193e78988e69d8331333431346339，当web应用移除或服务器停止时才销毁。在Web容器卸载 Filter 对象之前被调用。该方法在Filter的生命周期中仅执行一次。在这个方法中，可以释放过滤器使用的资源。</p></li></ul><p>模拟用户登录</p><pre class=" language-bash"><code class="language-bash">当用户需要访问filter配置过的路径时，需要判断是否成立，成立条件就是用servlet判断用户名是否正确filter通过查看用户名是否正确来判断权限的开放。</code></pre><h2 id="3-Filter的特点"><a href="#3-Filter的特点" class="headerlink" title="3.Filter的特点"></a>3.Filter的特点</h2><p>​    多个filter过滤器的特点：</p><p>​    1.所有的filter都执行在同一个线程中（默认）。</p><p>​    2.共享一个request对象</p><p>​    filterchain.dofilter()方法的作用</p><p>​        1.执行下一个filter过滤器（如果有的情况下）</p><p>​        2.执行目标资源</p><p>​    在多个filter指向同一个目标源时，他们的优先顺序时在xml里的配置顺序</p><p><img src="/2020/04/21/Filter/03.png" alt></p><h2 id="4-Fileter的配置如下"><a href="#4-Fileter的配置如下" class="headerlink" title="4.Fileter的配置如下"></a>4.Fileter的配置如下</h2><pre><code> &lt;filter&gt;        &lt;filter-name&gt;helloFilter&lt;/filter-name&gt;        &lt;filter-class&gt;cn.myq.filter.HelloFilter&lt;/filter-class&gt;    &lt;/filter&gt;    &lt;filter-mapping&gt;        &lt;filter-name&gt;helloFilter&lt;/filter-name&gt;            &lt;!--            当访问该目录下的任何一个文件时调用，HelloFilter程序            判断权限是否开放            --&gt;        &lt;url-pattern&gt;/admin/*&lt;/url-pattern&gt;    &lt;/filter-mapping&gt;</code></pre><h2 id="参考文献："><a href="#参考文献：" class="headerlink" title="参考文献："></a>参考文献：</h2><p><a href="https://zhidao.baidu.com/question/471427755.html" target="_blank" rel="noopener">https://zhidao.baidu.com/question/471427755.html</a></p><p><a href="http://www.atguigu.com/" target="_blank" rel="noopener">http://www.atguigu.com/</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hexo使用</title>
      <link href="/2020/04/20/Hexo%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/04/20/Hexo%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="1-首先去安装nodejs（官网nodejs-org）"><a href="#1-首先去安装nodejs（官网nodejs-org）" class="headerlink" title="1.首先去安装nodejs（官网nodejs.org）"></a>1.首先去安装nodejs（官网nodejs.org）</h2><p><img src="/2020/04/20/Hexo%E4%BD%BF%E7%94%A8/01.png" alt="01"></p><p><strong>安装：</strong>一直next到底即可</p><pre class=" language-bash"><code class="language-bash">查看是否安装成功查看node的版本node -v查看包管理器版本<span class="token function">npm</span> -v</code></pre><h2 id="2-并生成博客"><a href="#2-并生成博客" class="headerlink" title="2.并生成博客"></a>2.并生成博客</h2><pre class=" language-bash"><code class="language-bash">第二步：安装hexo框架（用淘宝源安装）安装cnpm<span class="token function">npm</span> <span class="token function">install</span> -g cnpm --registry<span class="token operator">=</span>https://registry.npm.taobao.org查看cnpm是否安装好cnpm -v安装hexo博客cnpm <span class="token function">install</span> -g hexo-cli查看hexo是否安装好hexo -v随意目录创建一个文件夹K（过程中出现错误直接干掉）生成博客<span class="token function">sudo</span> hexo init启动hexo s创建一个博客hexo new <span class="token string">"文章名"</span></code></pre><h2 id="3-将本地资源存放在远端的服务器上（免费的）"><a href="#3-将本地资源存放在远端的服务器上（免费的）" class="headerlink" title="3.将本地资源存放在远端的服务器上（免费的）"></a>3.将本地资源存放在远端的服务器上（免费的）</h2><p><img src="/2020/04/20/Hexo%E4%BD%BF%E7%94%A8/02.png" alt="02"></p><h2 id="4-githubssh公钥设置"><a href="#4-githubssh公钥设置" class="headerlink" title="4.githubssh公钥设置"></a>4.githubssh公钥设置</h2><ul><li>首先下载一个git软件</li></ul><p>​    <strong>下载地址：<a href="https://git-scm.com/downloads" target="_blank" rel="noopener">https://git-scm.com/downloads</a></strong></p><ul><li><p>一样一直next</p></li><li><p>配置用户名和邮箱</p></li></ul><pre class=" language-bash"><code class="language-bash">查看git用户配置<span class="token function">git</span> config user.name查看git邮箱配置<span class="token function">git</span> config user.email配置git用户<span class="token function">git</span> config --global user.name <span class="token string">"你的名字"</span>配置git邮箱<span class="token function">git</span> config --global user.email <span class="token string">"你的邮箱"</span>获取ssh公钥<span class="token function">cat</span> ~/.ssh/id_rsa.pub</code></pre><ul><li>设置github公钥</li></ul><p><img src="/2020/04/20/Hexo%E4%BD%BF%E7%94%A8/04.png" alt></p><h2 id="5-装一个git的插件"><a href="#5-装一个git的插件" class="headerlink" title="5.装一个git的插件"></a>5.装一个git的插件</h2><pre class=" language-bash"><code class="language-bash">中途报的错误不用管cnpm <span class="token function">install</span> --save hexo-deployer-git</code></pre><p><strong>并修改文件名K下的_config.yml</strong></p><p><img src="/2020/04/20/Hexo%E4%BD%BF%E7%94%A8/03.png" alt></p><p>最后：</p><pre><code>hexo d 部署到远端第一次部署，中途会出现让你登录github的窗口会让你输入github账号密码，最后推送完成</code></pre><p>​                                                                                <strong>修改主题不做赘述</strong></p><h2 id="6-修改玩主题需要重新生成"><a href="#6-修改玩主题需要重新生成" class="headerlink" title="6.修改玩主题需要重新生成"></a>6.修改玩主题需要重新生成</h2><pre class=" language-bash"><code class="language-bash">清除克隆hexo clean重新生成一下hexo g上传到githubhexo d</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 玩物搭建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2020/04/19/hello-world/"/>
      <url>/2020/04/19/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class=" language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class=" language-bash"><code class="language-bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class=" language-bash"><code class="language-bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class=" language-bash"><code class="language-bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
